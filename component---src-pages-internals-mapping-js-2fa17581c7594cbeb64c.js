(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{dHuR:function(e,a,t){"use strict";t.r(a);var l=t("q1tI"),n=t.n(l),r=t("TJpk"),i=t("rCNW"),m=t("KwlC"),c=t("w+gZ"),s="Types and conversions";a.default=function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(r.Helmet,null,n.a.createElement("title",null,s)),n.a.createElement("h1",null,s),n.a.createElement("p",null,"Chr.Avro supports mapping .NET’s ",n.a.createElement(c.a,{to:"https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/built-in-types-table"},"built-in types"),", as well as commonly used types like ",n.a.createElement(m.a,{id:"T:System.DateTime"})," and ",n.a.createElement(m.a,{id:"T:System.Uri"}),", to Avro schemas. This document is a comprehensive explanation of how that mapping works."),n.a.createElement("p",null,"The ",n.a.createElement(m.a,{id:"T:Chr.Avro.Serialization.BinarySerializerBuilder"},"serializer builder")," and ",n.a.createElement(m.a,{id:"T:Chr.Avro.Serialization.BinaryDeserializerBuilder"},"deserializer builder")," generally throw ",n.a.createElement(m.a,{id:"T:System.AggregateException"})," when a type can’t be mapped to a schema. Other exceptions, usually ",n.a.createElement(m.a,{id:"T:System.OverflowException"})," and ",n.a.createElement(m.a,{id:"T:System.FormatException"}),", are thrown when errors occur during serialization or deserialization."),n.a.createElement("h2",{id:"arrays"},"Arrays"),n.a.createElement("p",null,"Avro specifies an ",n.a.createElement(i.a,{inline:!0,language:"avro"},'"array"')," type for variable-length lists of items. Chr.Avro can map a .NET type to ",n.a.createElement(i.a,{inline:!0,language:"avro"},'"array"')," if any of the following is true:"),n.a.createElement("ol",null,n.a.createElement("li",null,n.a.createElement("p",null,"The type is a one-dimensional or jagged array. Multi-dimensional arrays are currently not supported because they can’t be deserialized reliably.")),n.a.createElement("li",null,n.a.createElement("p",null,"The type is an ",n.a.createElement(m.a,{id:"T:System.ArraySegment`1"})," type or a generic collection type from ",n.a.createElement(m.a,{id:"N:System.Collections.Generic"})," or ",n.a.createElement(m.a,{id:"N:System.Collections.Immutable"}),".")),n.a.createElement("li",null,n.a.createElement("p",null,"The type implements ",n.a.createElement(m.a,{id:"T:System.Collections.Generic.IEnumerable`1"})," (for serialization) and has a constructor with a single ",n.a.createElement(m.a,{id:"T:System.Collections.Generic.IEnumerable`1"})," parameter (for deserialization)."))),n.a.createElement("p",null,"Some examples:"),n.a.createElement("table",null,n.a.createElement("thead",null,n.a.createElement("tr",{valign:"top"},n.a.createElement("th",null,".NET type"),n.a.createElement("th",null,"Serializable"),n.a.createElement("th",null,"Deserializable"),n.a.createElement("th",null,"Notes"))),n.a.createElement("tbody",null,n.a.createElement("tr",{valign:"top"},n.a.createElement("td",null,n.a.createElement(m.a,{id:"T:System.Int32[]"})),n.a.createElement("td",{align:"center"},n.a.createElement("span",{role:"img","aria-label":"serializable"},"✅")),n.a.createElement("td",{align:"center"},n.a.createElement("span",{role:"img","aria-label":"deserializable"},"✅")),n.a.createElement("td",null,n.a.createElement(m.a,{id:"T:System.Int32[]"})," is a one-dimensional array type.")),n.a.createElement("tr",{valign:"top"},n.a.createElement("td",null,n.a.createElement(m.a,{id:"T:System.Int32[,,]"})),n.a.createElement("td",{align:"center"},n.a.createElement("span",{role:"img","aria-label":"not serializable"},"🚫")),n.a.createElement("td",{align:"center"},n.a.createElement("span",{role:"img","aria-label":"not deserializable"},"🚫")),n.a.createElement("td",null,n.a.createElement(m.a,{id:"T:System.Int32[,,]"})," is a multi-dimensional array type.")),n.a.createElement("tr",{valign:"top"},n.a.createElement("td",null,n.a.createElement(m.a,{id:"T:System.Int32[][]"})),n.a.createElement("td",{align:"center"},n.a.createElement("span",{role:"img","aria-label":"serializable"},"✅")),n.a.createElement("td",{align:"center"},n.a.createElement("span",{role:"img","aria-label":"deserializable"},"✅")),n.a.createElement("td",null,n.a.createElement(m.a,{id:"T:System.Int32[][]"})," is a jagged array type.")),n.a.createElement("tr",{valign:"top"},n.a.createElement("td",null,n.a.createElement(m.a,{id:"T:System.Collections.Generic.IEnumerable{System.Int32}"})),n.a.createElement("td",{align:"center"},n.a.createElement("span",{role:"img","aria-label":"serializable"},"✅")),n.a.createElement("td",{align:"center"},n.a.createElement("span",{role:"img","aria-label":"deserializable"},"✅")),n.a.createElement("td",null,n.a.createElement(m.a,{id:"T:System.Collections.Generic.IEnumerable{System.Int32}"})," is a generic collection type.")),n.a.createElement("tr",{valign:"top"},n.a.createElement("td",null,n.a.createElement(m.a,{id:"T:System.Collections.Generic.ISet{System.Int32}"})),n.a.createElement("td",{align:"center"},n.a.createElement("span",{role:"img","aria-label":"serializable"},"✅")),n.a.createElement("td",{align:"center"},n.a.createElement("span",{role:"img","aria-label":"deserializable"},"✅")),n.a.createElement("td",null,n.a.createElement(m.a,{id:"T:System.Collections.Generic.ISet{System.Int32}"})," is a generic collection type.")),n.a.createElement("tr",{valign:"top"},n.a.createElement("td",null,n.a.createElement(m.a,{id:"T:System.Collections.Generic.List{System.Int32}"})),n.a.createElement("td",{align:"center"},n.a.createElement("span",{role:"img","aria-label":"serializable"},"✅")),n.a.createElement("td",{align:"center"},n.a.createElement("span",{role:"img","aria-label":"deserializable"},"✅")),n.a.createElement("td",null,n.a.createElement(m.a,{id:"T:System.Collections.Generic.List{System.Int32}"})," is a generic collection type.")),n.a.createElement("tr",{valign:"top"},n.a.createElement("td",null,n.a.createElement(m.a,{id:"T:System.Collections.Generic.List{System.Int32[]}"})),n.a.createElement("td",{align:"center"},n.a.createElement("span",{role:"img","aria-label":"serializable"},"✅")),n.a.createElement("td",{align:"center"},n.a.createElement("span",{role:"img","aria-label":"deserializable"},"✅")),n.a.createElement("td",null,n.a.createElement(m.a,{id:"T:System.Collections.Generic.List{System.Int32[]}"})," is a generic collection type and ",n.a.createElement(m.a,{id:"T:System.Int32[]"})," is an array type.")),n.a.createElement("tr",{valign:"top"},n.a.createElement("td",null,n.a.createElement(m.a,{id:"T:System.Collections.Immutable.ImmutableQueue{System.Int32}"})),n.a.createElement("td",{align:"center"},n.a.createElement("span",{role:"img","aria-label":"serializable"},"✅")),n.a.createElement("td",{align:"center"},n.a.createElement("span",{role:"img","aria-label":"deserializable"},"✅")),n.a.createElement("td",null,n.a.createElement(m.a,{id:"T:System.Collections.Immutable.ImmutableQueue{System.Int32}"})," is a generic collection type.")),n.a.createElement("tr",{valign:"top"},n.a.createElement("td",null,n.a.createElement(m.a,{id:"T:System.Array"})),n.a.createElement("td",{align:"center"},n.a.createElement("span",{role:"img","aria-label":"not serializable"},"🚫")),n.a.createElement("td",{align:"center"},n.a.createElement("span",{role:"img","aria-label":"not deserializable"},"🚫")),n.a.createElement("td",null,n.a.createElement(m.a,{id:"T:System.Array"})," isn’t a generic type, so Chr.Avro can’t determine how to handle its items.")))),n.a.createElement("h2",{id:"booleans"},"Booleans"),n.a.createElement("p",null,"Chr.Avro maps Avro’s ",n.a.createElement(i.a,{inline:!0,language:"avro"},'"boolean"')," primitive type to the .NET ",n.a.createElement(m.a,{id:"T:System.Boolean"})," type. No implicit conversions exist between ",n.a.createElement(m.a,{id:"T:System.Boolean"})," and other types (see the ",n.a.createElement(c.a,{to:"https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/bool#conversions"},".NET docs"),"), so no other mappings are supported."),n.a.createElement("h2",{id:"byte-arrays"},"Byte arrays"),n.a.createElement("p",null,"In addition to ",n.a.createElement(m.a,{id:"T:System.Byte[]"}),", Chr.Avro supports mapping the following types to ",n.a.createElement(i.a,{inline:!0,language:"avro"},'"bytes"')," and ",n.a.createElement(i.a,{inline:!0,language:"avro"},'"fixed"'),":"),n.a.createElement("table",null,n.a.createElement("thead",null,n.a.createElement("tr",{valign:"top"},n.a.createElement("th",null,".NET type"),n.a.createElement("th",null,"Notes"))),n.a.createElement("tbody",null,n.a.createElement("tr",{valign:"top"},n.a.createElement("td",null,n.a.createElement(m.a,{id:"T:System.Guid"})),n.a.createElement("td",null,"The ",n.a.createElement(m.a,{id:"M:System.Guid.ToByteArray"},n.a.createElement(i.a,{inline:!0,language:"csharp"},"Guid.ToByteArray")," method")," is used for serialization, and the ",n.a.createElement(m.a,{id:"M:System.Guid.#ctor(System.Byte[])"},n.a.createElement(i.a,{inline:!0,language:"csharp"},"Guid")," constructor")," is used for deserialization. ",n.a.createElement(m.a,{id:"T:System.ArgumentException"})," is thrown when the length is not 16.")))),n.a.createElement("h2",{id:"dates-and-times"},"Dates and times"),n.a.createElement("p",null,"The Avro spec defines six logical types for temporal data:"),n.a.createElement("ul",null,n.a.createElement("li",null,"calendar dates with no time or time zone (",n.a.createElement(i.a,{inline:!0,language:"avro"},'"date"'),")"),n.a.createElement("li",null,"duration comprised of months, days, and milliseconds (",n.a.createElement(i.a,{inline:!0,language:"avro"},'"duration"'),")"),n.a.createElement("li",null,"times of day with no date or time zone (",n.a.createElement(i.a,{inline:!0,language:"avro"},'"time-millis"')," and ",n.a.createElement(i.a,{inline:!0,language:"avro"},'"time-micros"'),")"),n.a.createElement("li",null,"instants in time (",n.a.createElement(i.a,{inline:!0,language:"avro"},'"timestamp-millis"')," and ",n.a.createElement(i.a,{inline:!0,language:"avro"},'"timestamp-micros"'),")")),n.a.createElement("p",null,"In addition to the conversions described later in this section, these logical types can be treated as their underlying primitive types:"),n.a.createElement(i.a,{language:"csharp"},"var schema = new MillisecondTimestampSchema();\nvar serializer = new BinarySerializerBuilder().BuildSerializer<DateTime>();\nvar deserializer = new BinaryDeserializerBuilder().BuildDeserializer<long>();\n\nvar epoch = new DateTime(1970, 1, 1, 0, 0, 0, DateTimeKind.Utc);\ndeserializer.Deserialize(serializer.Serialize(epoch)); // 0L"),n.a.createElement("p",null,".NET doesn’t include any types that match calendar date or time of day semantics, so no special mappings are provided for ",n.a.createElement(i.a,{inline:!0,language:"avro"},'"date"'),", ",n.a.createElement(i.a,{inline:!0,language:"avro"},'"time-millis"'),", and ",n.a.createElement(i.a,{inline:!0,language:"avro"},'"time-micros"'),"."),n.a.createElement("h3",null,"Durations"),n.a.createElement("p",null,".NET’s ",n.a.createElement(m.a,{id:"T:System.TimeSpan"})," struct is commonly used to represent durations. Under the hood, a ",n.a.createElement(m.a,{id:"T:System.TimeSpan"})," stores its value as a number of ticks (1 tick = 100 ns = 0.0001 ms). However, ",n.a.createElement(i.a,{inline:!0,language:"avro"},'"duration"')," values can’t be reliably converted to a number of ticks; there isn’t a consistent number of milliseconds in a day or a consistent number of days in a month. Also, all three components are represented as unsigned integers, so negative durations cannot be expressed."),n.a.createElement("p",null,"In light of those incompatibilities, Chr.Avro prefers to map ",n.a.createElement(m.a,{id:"T:System.TimeSpan"}),"s to ",n.a.createElement(c.a,{to:"https://en.wikipedia.org/wiki/ISO_8601#Durations"},"ISO 8601 strings"),", avoiding ",n.a.createElement(i.a,{inline:!0,language:"avro"},'"duration"')," when building schemas. ",n.a.createElement(m.a,{id:"M:System.Xml.XmlConvert.ToString(System.TimeSpan)"},n.a.createElement(i.a,{inline:!0,language:"csharp"},"XmlConvert.ToString"))," and ",n.a.createElement(m.a,{id:"M:System.Xml.XmlConvert.ToTimeSpan(System.String)"},n.a.createElement(i.a,{inline:!0,language:"csharp"},"XmlConvert.ToTimeSpan"))," are used for conversions. ",n.a.createElement(m.a,{id:"T:System.FormatException"})," is thrown when a string cannot be parsed."),n.a.createElement("p",null,"Serializing and deserializing ",n.a.createElement(i.a,{inline:!0,language:"avro"},'"duration"')," values still work, though there are some limitations. .NET assumes a ",n.a.createElement(m.a,{id:"F:System.TimeSpan.TicksPerDay"},"consistent number of milliseconds in a day"),", so Chr.Avro supports the day and millisecond components. (This may lead to minor arithmetic inconsistencies with other platforms.) All non-negative ",n.a.createElement(m.a,{id:"T:System.TimeSpan"}),"s can be serialized without using the months component. ",n.a.createElement(m.a,{id:"T:System.OverflowException"})," is thrown when serializing a negative ",n.a.createElement(m.a,{id:"T:System.TimeSpan"})," and when deserializing a value with a non-zero months component."),n.a.createElement("h3",null,"Timestamps"),n.a.createElement("p",null,"Both ",n.a.createElement(m.a,{id:"T:System.DateTime"})," and ",n.a.createElement(m.a,{id:"T:System.DateTimeOffset"})," can be used to represent timestamps. Chr.Avro prefers to map those types to ",n.a.createElement(c.a,{to:"https://en.wikipedia.org/wiki/ISO_8601#Combined_date_and_time_representations"},"ISO 8601 strings"),", avoiding ",n.a.createElement(i.a,{inline:!0,language:"avro"},'"timestamp-millis"')," and ",n.a.createElement(i.a,{inline:!0,language:"avro"},'"timestamp-micros"')," when building schemas. This behavior is consistent with how durations are handled, and it also means that ",n.a.createElement(m.a,{id:"T:System.DateTime"})," kind and timezone are retained—the ",n.a.createElement(c.a,{to:"https://docs.microsoft.com/en-us/dotnet/standard/base-types/standard-date-and-time-format-strings#Roundtrip"},"round-trip (“O”, “o”) format specifier")," is used for serialization. ",n.a.createElement(m.a,{id:"T:System.FormatException"})," is thrown when a string cannot be parsed."),n.a.createElement("p",null,"Serializing and deserializing ",n.a.createElement(i.a,{inline:!0,language:"avro"},'"timestamp-millis"')," and ",n.a.createElement(i.a,{inline:!0,language:"avro"},'"timestamp-micros"')," values are supported as well, with a few caveats:"),n.a.createElement("ul",null,n.a.createElement("li",null,"All ",n.a.createElement(m.a,{id:"T:System.DateTime"}),"s are converted to UTC. Don’t use ",n.a.createElement(m.a,{id:"T:System.DateTime"}),"s with kind unspecified."),n.a.createElement("li",null,".NET date types are tick-precision, so serializing to ",n.a.createElement(i.a,{inline:!0,language:"avro"},'"timestamp-millis"')," or deserializing from ",n.a.createElement(i.a,{inline:!0,language:"avro"},'"timestamp-micros"')," may result in a loss of precision.")),n.a.createElement("h2",{id:"enums"},"Enums"),n.a.createElement("p",null,"Chr.Avro maps .NET enumerations to Avro’s ",n.a.createElement(i.a,{inline:!0,language:"avro"},'"enum"')," type by matching each symbol on the schema to an enumerator on the enumeration according to these rules:"),n.a.createElement("ul",null,n.a.createElement("li",null,n.a.createElement("p",null,"Enumerator names don’t need to be an exact match—all non-alphanumeric characters are stripped and comparisons are case-insensitive. For example, a ",n.a.createElement("code",null,"PRIMARY_RESIDENCE")," symbol will match enumerators named ",n.a.createElement("code",null,"PrimaryResidence"),", ",n.a.createElement("code",null,"primaryResidence"),", etc.")),n.a.createElement("li",null,n.a.createElement("p",null,"When the serializer builder and deserializer builder find multiple matching enumerators, ",n.a.createElement(m.a,{id:"T:System.AggregateException"})," is thrown.")),n.a.createElement("li",null,n.a.createElement("p",null,"When the deserializer builder can’t find a matching enumerator, ",n.a.createElement(m.a,{id:"T:System.AggregateException"})," is thrown."))),n.a.createElement("p",null,"By default, Chr.Avro also honors data contract attributes if a ",n.a.createElement(m.a,{id:"T:System.Runtime.Serialization.DataContractAttribute"})," is present on the enumeration. In that case, if ",n.a.createElement(m.a,{id:"P:System.Runtime.Serialization.EnumMemberAttribute.Value"})," is set on an enumerator, the custom value must match the symbol exactly. If it’s not set, the enumerator name will be compared inexactly as described above."),n.a.createElement("p",null,"To change or extend this behavior, implement ",n.a.createElement(m.a,{id:"T:Chr.Avro.Resolution.ITypeResolver"})," or extend one of the existing resolvers (",n.a.createElement(m.a,{id:"T:Chr.Avro.Resolution.ReflectionResolver"})," and ",n.a.createElement(m.a,{id:"T:Chr.Avro.Resolution.DataContractResolver"}),")."),n.a.createElement("p",null,"Because enum types are able to be implicitly converted to and from integral types, Chr.Avro can map any integral type to ",n.a.createElement(i.a,{inline:!0,language:"avro"},'"enum"')," as well."),n.a.createElement("h2",{id:"maps"},"Maps"),n.a.createElement("p",null,"Avro’s ",n.a.createElement(i.a,{inline:!0,language:"avro"},'"map"')," type represents a map of keys (assumed to be strings) to values. Chr.Avro can map a .NET type to ",n.a.createElement(i.a,{inline:!0,language:"avro"},'"map"')," if any of the following is true:"),n.a.createElement("ol",null,n.a.createElement("li",null,n.a.createElement("p",null,"The type is a generic dictionary type from ",n.a.createElement(m.a,{id:"N:System.Collections.Generic"})," or ",n.a.createElement(m.a,{id:"N:System.Collections.Immutable"}),".")),n.a.createElement("li",null,n.a.createElement("p",null,"The type implements ",n.a.createElement(m.a,{id:"T:System.Collections.Generic.IEnumerable{System.Collections.Generic.KeyValuePair`2}"})," (for serialization) and has a constructor with a single ",n.a.createElement(m.a,{id:"T:System.Collections.Generic.IEnumerable{System.Collections.Generic.KeyValuePair`2}"})," parameter (for deserialization)."))),n.a.createElement("p",null,"Additionally, because Avro map keys are assumed to be strings, serializers and deserializers are built for key types by mapping to ",n.a.createElement(i.a,{inline:!0,language:"avro"},'"string"')," implicitly."),n.a.createElement("p",null,"Some examples of this behavior:"),n.a.createElement("table",null,n.a.createElement("thead",null,n.a.createElement("tr",{valign:"top"},n.a.createElement("th",null,".NET type"),n.a.createElement("th",null,"Serializable"),n.a.createElement("th",null,"Deserializable"),n.a.createElement("th",null,"Notes"))),n.a.createElement("tbody",null,n.a.createElement("tr",{valign:"top"},n.a.createElement("td",null,n.a.createElement(m.a,{id:"T:System.Collections.Generic.IDictionary{System.String,System.Int32}"})),n.a.createElement("td",{align:"center"},n.a.createElement("span",{role:"img","aria-label":"serializable"},"✅")),n.a.createElement("td",{align:"center"},n.a.createElement("span",{role:"img","aria-label":"deserializable"},"✅")),n.a.createElement("td",null,n.a.createElement(m.a,{id:"T:System.Collections.Generic.IDictionary{System.String,System.Int32}"})," is a generic dictionary type.")),n.a.createElement("tr",{valign:"top"},n.a.createElement("td",null,n.a.createElement(m.a,{id:"T:System.Collections.Generic.Dictionary{System.String,System.Int32}"})),n.a.createElement("td",{align:"center"},n.a.createElement("span",{role:"img","aria-label":"serializable"},"✅")),n.a.createElement("td",{align:"center"},n.a.createElement("span",{role:"img","aria-label":"deserializable"},"✅")),n.a.createElement("td",null,n.a.createElement(m.a,{id:"T:System.Collections.Generic.Dictionary{System.String,System.Int32}"})," is a generic dictionary type.")),n.a.createElement("tr",{valign:"top"},n.a.createElement("td",null,n.a.createElement(m.a,{id:"T:System.Collections.Generic.IDictionary{System.Guid,System.Int32}"})),n.a.createElement("td",{align:"center"},n.a.createElement("span",{role:"img","aria-label":"serializable"},"✅")),n.a.createElement("td",{align:"center"},n.a.createElement("span",{role:"img","aria-label":"deserializable"},"✅")),n.a.createElement("td",null,n.a.createElement(m.a,{id:"T:System.Collections.Generic.IDictionary{System.Guid,System.Int32}"})," is a generic dictionary type, and ",n.a.createElement(m.a,{id:"T:System.Guid"})," can be mapped to ",n.a.createElement(i.a,{inline:!0,language:"avro"},'"string"'),".")),n.a.createElement("tr",{valign:"top"},n.a.createElement("td",null,n.a.createElement(m.a,{id:"T:System.Collections.Generic.IDictionary{System.Byte[],System.Int32}"})),n.a.createElement("td",{align:"center"},n.a.createElement("span",{role:"img","aria-label":"not serializable"},"🚫")),n.a.createElement("td",{align:"center"},n.a.createElement("span",{role:"img","aria-label":"not deserializable"},"🚫")),n.a.createElement("td",null,n.a.createElement(m.a,{id:"T:System.Collections.Generic.IDictionary{System.Byte[],System.Int32}"})," is a generic dictionary type, but ",n.a.createElement(m.a,{id:"T:System.Byte[]"})," cannot be mapped to ",n.a.createElement(i.a,{inline:!0,language:"avro"},'"string"'),".")),n.a.createElement("tr",{valign:"top"},n.a.createElement("td",null,n.a.createElement(m.a,{id:"T:System.Collections.Generic.IEnumerable{System.Collections.Generic.KeyValuePair{System.String,System.Int32}}"})),n.a.createElement("td",{align:"center"},n.a.createElement("span",{role:"img","aria-label":"serializable"},"✅")),n.a.createElement("td",{align:"center"},n.a.createElement("span",{role:"img","aria-label":"deserializable"},"✅")),n.a.createElement("td",null,n.a.createElement(m.a,{id:"T:System.Collections.Generic.IEnumerable{System.Collections.Generic.KeyValuePair{System.String,System.Int32}}"})," is recognized as a generic dictionary type.")),n.a.createElement("tr",{valign:"top"},n.a.createElement("td",null,n.a.createElement(m.a,{id:"T:System.Collections.Generic.ICollection{System.Collections.Generic.KeyValuePair{System.String,System.Int32}}"})),n.a.createElement("td",{align:"center"},n.a.createElement("span",{role:"img","aria-label":"serializable"},"✅")),n.a.createElement("td",{align:"center"},n.a.createElement("span",{role:"img","aria-label":"deserializable"},"✅")),n.a.createElement("td",null,n.a.createElement(m.a,{id:"T:System.Collections.Generic.ICollection{System.Collections.Generic.KeyValuePair{System.String,System.Int32}}"})," is recognized as a generic dictionary type.")),n.a.createElement("tr",{valign:"top"},n.a.createElement("td",null,n.a.createElement(m.a,{id:"T:System.Collections.Immutable.ImmutableSortedDictionary{System.String,System.Int32}"})),n.a.createElement("td",{align:"center"},n.a.createElement("span",{role:"img","aria-label":"serializable"},"✅")),n.a.createElement("td",{align:"center"},n.a.createElement("span",{role:"img","aria-label":"deserializable"},"✅")),n.a.createElement("td",null,n.a.createElement(m.a,{id:"T:System.Collections.Immutable.ImmutableSortedDictionary{System.String,System.Int32}"})," is a generic dictionary type.")),n.a.createElement("tr",{valign:"top"},n.a.createElement("td",null,n.a.createElement(m.a,{id:"T:System.Collections.Generic.IEnumerable{System.ValueTuple{System.String,System.Int32}}"})),n.a.createElement("td",{align:"center"},n.a.createElement("span",{role:"img","aria-label":"not serializable"},"🚫")),n.a.createElement("td",{align:"center"},n.a.createElement("span",{role:"img","aria-label":"not deserializable"},"🚫")),n.a.createElement("td",null,n.a.createElement(m.a,{id:"T:System.Collections.Generic.IEnumerable{System.ValueTuple{System.String,System.Int32}}"})," is not recognized as a generic dictionary type.")))),n.a.createElement("h2",{id:"numbers"},"Numbers"),n.a.createElement("p",null,"The Avro spec defines ",n.a.createElement(c.a,{to:"https://avro.apache.org/docs/current/spec.html#schema_primitive"},"four primitive numeric types"),":"),n.a.createElement("ul",null,n.a.createElement("li",null,"32-bit signed integers (",n.a.createElement(i.a,{inline:!0,language:"avro"},'"int"'),")"),n.a.createElement("li",null,"64-bit signed integers (",n.a.createElement(i.a,{inline:!0,language:"avro"},'"long"'),")"),n.a.createElement("li",null,"single-precision (32-bit) floating-point numbers (",n.a.createElement(i.a,{inline:!0,language:"avro"},'"float"'),")"),n.a.createElement("li",null,"double-precision (64-bit) floating-point numbers (",n.a.createElement(i.a,{inline:!0,language:"avro"},'"double"'),")")),n.a.createElement("p",null,"It also defines a logical ",n.a.createElement(c.a,{to:"https://avro.apache.org/docs/current/spec.html#Decimal"},n.a.createElement(i.a,{inline:!0,language:"avro"},'"decimal"'))," type that supports arbitrary-precision decimal numbers."),n.a.createElement("h3",null,"Integral types"),n.a.createElement("p",null,"When generating a schema, Chr.Avro maps integral types less than or equal to 32 bits to ",n.a.createElement(i.a,{inline:!0,language:"avro"},'"int"')," and integral types greater than 32 bits to ",n.a.createElement(i.a,{inline:!0,language:"avro"},'"long"'),":"),n.a.createElement("table",null,n.a.createElement("thead",null,n.a.createElement("tr",{valign:"top"},n.a.createElement("th",null,".NET type"),n.a.createElement("th",null,"Range"),n.a.createElement("th",{align:"right"},"Bits"),n.a.createElement("th",null,"Generated schema"))),n.a.createElement("tbody",null,n.a.createElement("tr",{valign:"top"},n.a.createElement("td",null,n.a.createElement(m.a,{id:"T:System.SByte"})),n.a.createElement("td",null,"−128 to 127"),n.a.createElement("td",{align:"right"},"8"),n.a.createElement("td",null,n.a.createElement(i.a,{language:"avro"},'"int"'))),n.a.createElement("tr",{valign:"top"},n.a.createElement("td",null,n.a.createElement(m.a,{id:"T:System.Byte"})),n.a.createElement("td",null,"0 to 255"),n.a.createElement("td",{align:"right"},"8"),n.a.createElement("td",null,n.a.createElement(i.a,{language:"avro"},'"int"'))),n.a.createElement("tr",{valign:"top"},n.a.createElement("td",null,n.a.createElement(m.a,{id:"T:System.Int16"})),n.a.createElement("td",null,"−32,768 to 32,767"),n.a.createElement("td",{align:"right"},"16"),n.a.createElement("td",null,n.a.createElement(i.a,{language:"avro"},'"int"'))),n.a.createElement("tr",{valign:"top"},n.a.createElement("td",null,n.a.createElement(m.a,{id:"T:System.UInt16"})),n.a.createElement("td",null,"0 to 65,535"),n.a.createElement("td",{align:"right"},"16"),n.a.createElement("td",null,n.a.createElement(i.a,{language:"avro"},'"int"'))),n.a.createElement("tr",{valign:"top"},n.a.createElement("td",null,n.a.createElement(m.a,{id:"T:System.Char"})),n.a.createElement("td",null,"0 (U+0000) to 65,535 (U+ffff)"),n.a.createElement("td",{align:"right"},"16"),n.a.createElement("td",null,n.a.createElement(i.a,{language:"avro"},'"int"'))),n.a.createElement("tr",{valign:"top"},n.a.createElement("td",null,n.a.createElement(m.a,{id:"T:System.Int32"})),n.a.createElement("td",null,"−2,147,483,648 to 2,147,483,647"),n.a.createElement("td",{align:"right"},"32"),n.a.createElement("td",null,n.a.createElement(i.a,{language:"avro"},'"int"'))),n.a.createElement("tr",{valign:"top"},n.a.createElement("td",null,n.a.createElement(m.a,{id:"T:System.UInt32"})),n.a.createElement("td",null,"0 to 4,294,967,295"),n.a.createElement("td",{align:"right"},"32"),n.a.createElement("td",null,n.a.createElement(i.a,{language:"avro"},'"int"'))),n.a.createElement("tr",{valign:"top"},n.a.createElement("td",null,n.a.createElement(m.a,{id:"T:System.Int64"})),n.a.createElement("td",null,"−9,223,372,036,854,775,808 to 9,223,372,036,854,775,807"),n.a.createElement("td",{align:"right"},"64"),n.a.createElement("td",null,n.a.createElement(i.a,{language:"avro"},'"long"'))),n.a.createElement("tr",{valign:"top"},n.a.createElement("td",null,n.a.createElement(m.a,{id:"T:System.UInt64"})),n.a.createElement("td",null,"0 to 18,446,744,073,709,551,615"),n.a.createElement("td",{align:"right"},"64"),n.a.createElement("td",null,n.a.createElement(i.a,{language:"avro"},'"long"'))))),n.a.createElement("p",null,"Whether a schema is ",n.a.createElement(i.a,{inline:!0,language:"avro"},'"int"')," or ",n.a.createElement(i.a,{inline:!0,language:"avro"},'"long"')," has no impact on serialization. Integers are ",n.a.createElement(c.a,{to:"https://avro.apache.org/docs/current/spec.html#binary_encoding"},"zig-zag encoded"),", so they take up as much space as they need. For that reason, Chr.Avro imposes no constraints on which numeric types can be serialized or deserialized to ",n.a.createElement(i.a,{inline:!0,language:"avro"},'"int"')," or ",n.a.createElement(i.a,{inline:!0,language:"avro"},'"long"'),"—if a conversion exists, the binary serializer and deserializer will use it."),n.a.createElement("h3",null,"Non-integral types"),n.a.createElement("p",null,"On the non-integral side, .NET types are mapped to their respective Avro types:"),n.a.createElement("table",null,n.a.createElement("thead",null,n.a.createElement("tr",{valign:"top"},n.a.createElement("th",null,".NET type"),n.a.createElement("th",null,"Approximate range"),n.a.createElement("th",null,"Precision"),n.a.createElement("th",null,"Generated schema"))),n.a.createElement("tbody",null,n.a.createElement("tr",{valign:"top"},n.a.createElement("td",null,n.a.createElement(m.a,{id:"T:System.Single"})),n.a.createElement("td",null,"±1.5 × 10",n.a.createElement("sup",null,"−45")," to ±3.4 × 10",n.a.createElement("sup",null,"38")),n.a.createElement("td",null,"~6–9 digits"),n.a.createElement("td",null,n.a.createElement(i.a,{language:"avro"},'"float"'))),n.a.createElement("tr",{valign:"top"},n.a.createElement("td",null,n.a.createElement(m.a,{id:"T:System.Double"})),n.a.createElement("td",null,"±5.0 × 10",n.a.createElement("sup",null,"−324")," to ±1.7 × 10",n.a.createElement("sup",null,"308")),n.a.createElement("td",null,"~15–17 digits"),n.a.createElement("td",null,n.a.createElement(i.a,{language:"avro"},'"double"'))),n.a.createElement("tr",{valign:"top"},n.a.createElement("td",null,n.a.createElement(m.a,{id:"T:System.Decimal"})),n.a.createElement("td",null,"±1.0 × 10",n.a.createElement("sup",null,"−28")," to ±7.9228 × 10",n.a.createElement("sup",null,"28")),n.a.createElement("td",null,"28–29 significant digits"),n.a.createElement("td",null,n.a.createElement(i.a,{language:"avro"},'{\n  "type": "bytes",\n  "logicalType": "decimal",\n  "precision": 29,\n  "scale": 14\n}'))))),n.a.createElement("p",null,"Generally speaking, it’s a good idea to fit the precision and scale of a decimal schema to a specific use case. For example, air temperature measurements in ℉ might have a precision of 4 and a scale of 1. (29 and 14, the schema builder defaults, were selected to fit any .NET decimal.) Decimal values are resized to fit the scale specified by the schema—when serializing, digits may be truncated; when deserializing, zeros may be added."),n.a.createElement("h3",null,"Caveats"),n.a.createElement("p",null,"Because the serializer and deserializer rely on predefined conversions, the ",n.a.createElement(c.a,{to:"https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/explicit-numeric-conversions-table#remarks"},"remarks from the C# numeric conversions table")," are relevant. Notably:"),n.a.createElement("ul",null,n.a.createElement("li",null,n.a.createElement("p",null,"Conversions may cause a loss of precision. For instance, if a ",n.a.createElement(i.a,{inline:!0,language:"avro"},'"double"')," value is deserialized into a ",n.a.createElement(m.a,{id:"T:System.Single"}),", the value will be rounded to the nearest ",n.a.createElement(m.a,{id:"T:System.Single"})," value:"),n.a.createElement(i.a,{language:"csharp"},"var schema = new DoubleSchema();\nvar serializer = new BinarySerializerBuilder().BuildSerializer<double>(schema);\nvar deserializer = new BinaryDeserializerBuilder().BuildDeserializer<float>(schema);\n\nvar e = Math.E; // 2.71828182845905\nvar bytes = serializer.Serialize(e);\n\ndeserializer.Deserialize(bytes); // 2.718282"),n.a.createElement("p",null,"See the ",n.a.createElement(c.a,{to:"https://docs.microsoft.com/en-us/dotnet/standard/base-types/conversion-tables"},".NET type conversion tables")," for a complete list of conversions.")),n.a.createElement("li",null,n.a.createElement("p",null,n.a.createElement(m.a,{id:"T:System.OverflowException"})," is thrown when a conversion fails during serialization or deserialization."),n.a.createElement("p",null,"When a value is out of the range of a numeric type:"),n.a.createElement(i.a,{language:"csharp"},"var schema = new IntSchema();\nvar serializer = new BinarySerializerBuilder().BuildSerializer<int>(schema);\nvar deserializer = new BinaryDeserializerBuilder().BuildDeserializer<short>(schema);\n\nvar bytes = serializer.Serialize(int.MaxValue);\n\ndeserializer.Deserialize(bytes); // throws OverflowException"),n.a.createElement("p",null,"When special floating-point values are deserialized to ",n.a.createElement(m.a,{id:"T:System.Decimal"}),":"),n.a.createElement(i.a,{language:"csharp"},"var schema = new FloatSchema();\nvar serializer = new BinarySerializerBuilder().BuildSerializer<float>(schema);\nvar deserializer = new BinaryDeserializerBuilder().BuildDeserializer<decimal>(schema);\n\nvar bytes = serializer.Serialize(float.NaN);\n\ndeserializer.Deserialize(bytes); // throws OverflowException"),n.a.createElement("p",null,"Finally, when a serialized integer is too large to deserialize:"),n.a.createElement(i.a,{language:"csharp"},"var schema = new LongSchema();\nvar deserializer = new BinaryDeserializerBuilder().BuildDeserializer<long>(schema);\n\nvar bytes = new byte[]\n{\n    0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0x01\n};\n\ndeserializer.Deserialize(bytes); // throws OverflowException"))),n.a.createElement("h2",{id:"records"},"Records"),n.a.createElement("p",null,"Chr.Avro maps .NET classes and structs to Avro’s ",n.a.createElement(i.a,{inline:!0,language:"avro"},'"record"')," type by attempting to find a matching constructor. The rules:"),n.a.createElement("ul",null,n.a.createElement("li",null,n.a.createElement("p",null,"Parameter names don't need to match the schema exactly—all non-alphanumeric characters are stripped and comparisons are case-insensitive. So, for example, a record field named ",n.a.createElement("code",null,"addressLine1")," will match parameters named ",n.a.createElement("code",null,"AddressLine1"),", ",n.a.createElement("code",null,"AddressLine_1"),", ",n.a.createElement("code",null,"ADDRESS_LINE_1"),", etc.")),n.a.createElement("li",null,n.a.createElement("p",null,"Parameters must have exactly 1 match for each record field.")),n.a.createElement("li",null,n.a.createElement("p",null,"There may be additional optional parameters."))),n.a.createElement("p",null,"If no matching constructors are found then it will attempt to match each record field to a field or property on the type. The rules:"),n.a.createElement("ul",null,n.a.createElement("li",null,n.a.createElement("p",null,"Type member names don’t need to match the schema exactly—all non-alphanumeric characters are stripped and comparisons are case-insensitive. So, for example, a record field named ",n.a.createElement("code",null,"addressLine1")," will match type members named ",n.a.createElement("code",null,"AddressLine1"),", ",n.a.createElement("code",null,"AddressLine_1"),", ",n.a.createElement("code",null,"ADDRESS_LINE_1"),", etc.")),n.a.createElement("li",null,n.a.createElement("p",null,"When the serializer builder and deserializer builder find multiple matching type members, ",n.a.createElement(m.a,{id:"T:System.AggregateException"})," is thrown.")),n.a.createElement("li",null,n.a.createElement("p",null,"When the serializer builder can’t find a matching type member, ",n.a.createElement(m.a,{id:"T:System.AggregateException"})," is thrown. When the deserializer can’t find a matching type member, the field is ignored.")),n.a.createElement("li",null,n.a.createElement("p",null,"The deserializer builder throws ",n.a.createElement(m.a,{id:"T:System.AggregateException"})," if a type doesn’t have a parameterless public constructor."))),n.a.createElement("p",null,"By default, Chr.Avro also honors data contract attributes if a ",n.a.createElement(m.a,{id:"T:System.Runtime.Serialization.DataContractAttribute"})," is present on the type. In that case, two additional rules apply:"),n.a.createElement("ul",null,n.a.createElement("li",null,n.a.createElement("p",null,"All type members without a ",n.a.createElement(m.a,{id:"T:System.Runtime.Serialization.DataMemberAttribute"})," are ignored.")),n.a.createElement("li",null,n.a.createElement("p",null,"If ",n.a.createElement(m.a,{id:"P:System.Runtime.Serialization.DataContractAttribute.Name"})," is set, the custom name must match the record field name exactly. If it’s not set, the type member name will be compared inexactly as described above."))),n.a.createElement("p",null,"To change or extend this behavior, implement ",n.a.createElement(m.a,{id:"T:Chr.Avro.Resolution.ITypeResolver"})," or extend one of the existing resolvers (",n.a.createElement(m.a,{id:"T:Chr.Avro.Resolution.ReflectionResolver"})," and ",n.a.createElement(m.a,{id:"T:Chr.Avro.Resolution.DataContractResolver"}),")."),n.a.createElement("h2",{id:"strings"},"Strings"),n.a.createElement("p",null,"In addition to ",n.a.createElement(m.a,{id:"T:System.String"}),", Chr.Avro supports mapping the following types to ",n.a.createElement(i.a,{inline:!0,language:"avro"},'"string"'),":"),n.a.createElement("table",null,n.a.createElement("thead",null,n.a.createElement("tr",{valign:"top"},n.a.createElement("th",null,".NET type"),n.a.createElement("th",null,"Notes"))),n.a.createElement("tbody",null,n.a.createElement("tr",{valign:"top"},n.a.createElement("td",null,n.a.createElement(m.a,{id:"T:System.DateTime"})),n.a.createElement("td",{rowSpan:"3"},"Values are expressed as strings according to ",n.a.createElement(c.a,{to:"https://en.wikipedia.org/wiki/ISO_8601"},"ISO 8601"),". See the ",n.a.createElement("a",{href:"#dates-and-times"},"dates and times section")," for details.")),n.a.createElement("tr",{valign:"top"},n.a.createElement("td",null,n.a.createElement(m.a,{id:"T:System.DateTimeOffset"}))),n.a.createElement("tr",{valign:"top"},n.a.createElement("td",null,n.a.createElement(m.a,{id:"T:System.TimeSpan"}))),n.a.createElement("tr",{valign:"top"},n.a.createElement("td",null,n.a.createElement(m.a,{id:"T:System.Guid"})),n.a.createElement("td",null,"The ",n.a.createElement(m.a,{id:"M:System.Guid.ToString"},n.a.createElement(i.a,{inline:!0,language:"csharp"},"Guid.ToString")," method")," is used for serialization, and the ",n.a.createElement(m.a,{id:"M:System.Guid.#ctor(System.String)"},n.a.createElement(i.a,{inline:!0,language:"csharp"},"Guid")," constructor")," is used for deserialization. ",n.a.createElement(m.a,{id:"T:System.FormatException"})," is thrown when a string cannot be parsed.")),n.a.createElement("tr",{valign:"top"},n.a.createElement("td",null,n.a.createElement(m.a,{id:"T:System.Uri"})),n.a.createElement("td",null,"The ",n.a.createElement(m.a,{id:"M:System.Uri.ToString"},n.a.createElement(i.a,{inline:!0,language:"csharp"},"Uri.ToString")," method")," is used for serialization, and the ",n.a.createElement(m.a,{id:"M:System.Uri.#ctor(System.String)"},n.a.createElement(i.a,{inline:!0,language:"csharp"},"Uri")," constructor")," is used for deserialization. ",n.a.createElement(m.a,{id:"T:System.FormatException"})," is thrown when a string cannot be parsed.")))),n.a.createElement("h2",{id:"unions"},"Unions"),n.a.createElement("p",null,"Chr.Avro maps Avro unions to .NET types according to these rules:"),n.a.createElement("ul",null,n.a.createElement("li",null,n.a.createElement("p",null,"Unions must contain more than one schema. Avro doesn’t explicitly disallow empty unions, but they can’t be serialized or deserialized.")),n.a.createElement("li",null,n.a.createElement("p",null,"When mapping a union schema to a type for serialization, the type must be able to be mapped to one of the non-",n.a.createElement(i.a,{inline:!0,language:"avro"},'"null"')," schemas in the union (if there are any).")),n.a.createElement("li",null,n.a.createElement("p",null,"When mapping a union schema to a type for deserialization, the type must be able to be mapped to all of the schemas in the union."))),n.a.createElement("p",null,"So, for example:"),n.a.createElement("table",null,n.a.createElement("thead",null,n.a.createElement("tr",{valign:"top"},n.a.createElement("th",null,"Schema"),n.a.createElement("th",null,".NET type"),n.a.createElement("th",null,"Serializable"),n.a.createElement("th",null,"Deserializable"),n.a.createElement("th",null,"Notes"))),n.a.createElement("tbody",null,n.a.createElement("tr",{valign:"top"},n.a.createElement("td",null,n.a.createElement(i.a,{language:"avro"},"[]")),n.a.createElement("td",null),n.a.createElement("td",{align:"center"},n.a.createElement("span",{role:"img","aria-label":"not serializable"},"🚫")),n.a.createElement("td",{align:"center"},n.a.createElement("span",{role:"img","aria-label":"not deserializable"},"🚫")),n.a.createElement("td",null,"Empty unions are not supported.")),n.a.createElement("tr",{valign:"top"},n.a.createElement("td",null,n.a.createElement(i.a,{language:"avro"},'["int"]')),n.a.createElement("td",null,n.a.createElement(m.a,{id:"T:System.Int32"})),n.a.createElement("td",{align:"center"},n.a.createElement("span",{role:"img","aria-label":"serializable"},"✅")),n.a.createElement("td",{align:"center"},n.a.createElement("span",{role:"img","aria-label":"deserializable"},"✅")),n.a.createElement("td",null,n.a.createElement(m.a,{id:"T:System.Int32"})," could be serialized and deserialized as ",n.a.createElement(i.a,{inline:!0,language:"avro"},'"int"'),".")),n.a.createElement("tr",{valign:"top"},n.a.createElement("td",null,n.a.createElement(i.a,{language:"avro"},'["null"]')),n.a.createElement("td",null,n.a.createElement(m.a,{id:"T:System.Int32"})),n.a.createElement("td",{align:"center"},n.a.createElement("span",{role:"img","aria-label":"serializable"},"✅")),n.a.createElement("td",{align:"center"},n.a.createElement("span",{role:"img","aria-label":"not deserializable"},"🚫")),n.a.createElement("td",null,n.a.createElement(m.a,{id:"T:System.Int32"})," could be serialized as ",n.a.createElement(i.a,{inline:!0,language:"avro"},'"null"'),", but it couldn’t be deserialized as ",n.a.createElement(i.a,{inline:!0,language:"avro"},'"null"'),".")),n.a.createElement("tr",{valign:"top"},n.a.createElement("td",null,n.a.createElement(i.a,{language:"avro"},'["int","string"]')),n.a.createElement("td",null,n.a.createElement(m.a,{id:"T:System.Int32"})),n.a.createElement("td",{align:"center"},n.a.createElement("span",{role:"img","aria-label":"serializable"},"✅")),n.a.createElement("td",{align:"center"},n.a.createElement("span",{role:"img","aria-label":"not deserializable"},"🚫")),n.a.createElement("td",null,n.a.createElement(m.a,{id:"T:System.Int32"})," could be serialized as ",n.a.createElement(i.a,{inline:!0,language:"avro"},'"int"'),", but it couldn’t be deserialized as ",n.a.createElement(i.a,{inline:!0,language:"avro"},'"string"'),".")),n.a.createElement("tr",{valign:"top"},n.a.createElement("td",null,n.a.createElement(i.a,{language:"avro"},'["null","int"]')),n.a.createElement("td",null,n.a.createElement(m.a,{id:"T:System.Int32"})),n.a.createElement("td",{align:"center"},n.a.createElement("span",{role:"img","aria-label":"serializable"},"✅")),n.a.createElement("td",{align:"center"},n.a.createElement("span",{role:"img","aria-label":"not deserializable"},"🚫")),n.a.createElement("td",null,n.a.createElement(m.a,{id:"T:System.Int32"})," could be serialized as ",n.a.createElement(i.a,{inline:!0,language:"avro"},'"int"'),", but it couldn’t be deserialized as ",n.a.createElement(i.a,{inline:!0,language:"avro"},'"null"'),".")),n.a.createElement("tr",{valign:"top"},n.a.createElement("td",null,n.a.createElement(i.a,{language:"avro"},'["null","int"]')),n.a.createElement("td",null,n.a.createElement(m.a,{id:"T:System.Nullable{System.Int32}"})),n.a.createElement("td",{align:"center"},n.a.createElement("span",{role:"img","aria-label":"serializable"},"✅")),n.a.createElement("td",{align:"center"},n.a.createElement("span",{role:"img","aria-label":"deserializable"},"✅")),n.a.createElement("td",null,n.a.createElement(m.a,{id:"T:System.Nullable{System.Int32}"})," could be serialized and deserialized as either ",n.a.createElement(i.a,{inline:!0,language:"avro"},'"null"')," or ",n.a.createElement(i.a,{inline:!0,language:"avro"},'"int"'),".")))))}}}]);
//# sourceMappingURL=component---src-pages-internals-mapping-js-2fa17581c7594cbeb64c.js.map